urls = [
  "http://genk.vn/mobile/lo-vo-hop-lg-g4-truoc-gio-g-20150428162937104.chn",
  "http://genk.vn/internet/google-that-bai-vi-dau-tai-ai-20150427114603665.chn",
  "http://genk.vn/tin-ict/apple-lai-thu-hang-tan-loi-nhuan-20150427105013726.chn",
  "http://genk.vn/mobile/anh-ro-ri-3-smartphone-blackberry-moi-20150428125423857.chn",
  "http://genk.vn/internet/meo-doi-font-chu-doc-dao-tren-facebook-20150428211039407.chn",
  "http://genk.vn/thu-thuat/case-doc-dao-tang-iphone-them-mot-man-hinh-20150422104703078.chn",
  "http://genk.vn/do-choi-so/apple-watch-vo-thep-khong-gi-rat-de-bi-xuoc-20150427101905865.chn",
  "http://genk.vn/tin-ict/snapchat-thu-nap-tuong-khung-la-tru-cot-cua-cnn-20150428165445293.chn",
  "http://genk.vn/tra-da-cong-nghe/apple-cung-co-mot-jarvis-giong-iron-man-20150427193627638.chn",
  "http://genk.vn/mobile/5-san-pham-co-gia-chat-nhat-apple-tung-trinh-lang-20150427235624664.chn",
  "http://genk.vn/do-choi-so/ubeam-sac-khong-day-de-dang-nhu-ket-noi-wi-fi-20150427224351819.chn",
  "http://genk.vn/mobile/lg-tung-video-gioi-thieu-giao-dien-ux-40-cua-lg-g4-20150424115704109.chn",
  "http://genk.vn/do-choi-so/gaming-case-xigmatek-assassin-sat-thu-lanh-lung-20150424233431525.chn",
  "http://genk.vn/kham-pha/choang-ngop-voi-pha-giai-rubik-trong-vong-5-25-giay-20150427203406005.chn",
  "http://genk.vn/apps-games/thu-tinh-kien-tri-voi-game-sieu-uc-che-cupky-jump-20150425020039567.chn",
  "http://genk.vn/internet/15-loi-tien-tri-da-tro-thanh-su-that-cua-bill-gates-20150429145141755.chn",
  "http://genk.vn/mobile/nhieu-ban-build-cho-windows-10-ngung-hoat-dong-sau-30-4-20150429100129277.chn",
  "http://genk.vn/apps-games/sau-taxi-uber-trien-khai-dich-vu-giao-thuc-an-tai-my-2015042823485667.chn",
  "http://genk.vn/mobile/gia-chinh-hang-21-49-trieu-dong-cho-galaxy-s6-edge-64-gb-20150427232521696.chn",
  "http://genk.vn/do-choi-so/can-canh-bo-doi-apple-watch-vua-co-hang-tai-viet-nam-20150425185522837.chn",
  "http://genk.vn/apps-games/cam-nang-du-lich-cho-tin-do-cong-nghe-phan-1-ung-dung-20150424004356308.chn",
  "http://genk.vn/tin-ict/mang-dien-thoai-cua-nokia-tro-thanh-cuc-no-cho-microsoft-20150428161743623.chn",
  "http://genk.vn/tan-man/lang-cong-nghe-trung-quoc-khai-chien-apple-tham-dau-xiaomi-20150428192819795.chn",
  "http://genk.vn/mobile/tuong-thuat-truc-tiep-microsoft-build-2015-22h-30-toi-29-04-20150429102315163.chn",
  "http://genk.vn/mobile/loat-smartphone-chinh-hang-ban-chay-nhat-trong-thang-4-2015-20150428154457778.chn",
  "http://genk.vn/do-choi-so/cam-nang-du-lich-cho-tin-do-cong-nghe-phan-2-do-choi-so-20150426001426644.chn",
  "http://genk.vn/thu-thuat/hai-cach-don-gian-de-chuyen-doi-dinh-dang-video-tren-mac-20150426072302394.chn",
  "http://genk.vn/apps-games/plunder-pirates-game-cuop-bien-den-tu-cha-de-angry-birds-20150427232615066.chn",
  "http://genk.vn/kham-pha/hang-xe-audi-co-the-tao-ra-dau-diesel-tu-khong-khi-va-nuoc-20150427112651342.chn",
  "http://genk.vn/apps-games/ung-dung-phan-mem-game-giam-gia-mien-phi-trong-ngay-29-4-20150429133329035.chn",
  "http://genk.vn/may-tinh/case-may-tinh-cho-game-thu-cyberpower-trinity-dep-doc-manh-20150424021948382.chn",
  "http://genk.vn/apps-games/ung-dung-phan-mem-game-giam-gia-mien-phi-trong-ngay-28-4-20150427233257805.chn",
  "http://genk.vn/thu-thuat/tu-kiem-tra-va-khac-phuc-cac-loi-vat-tren-microsoft-office-20150424183952061.chn",
  "http://genk.vn/apps-games/instagram-cap-nhat-them-3-bo-loc-moi-ho-tro-emoji-hashtags-20150428095718134.chn",
  "http://genk.vn/do-choi-so/benchtable-cho-game-thu-thu-choi-doc-nhung-khong-con-xa-xi-20150427000632594.chn",
  "http://genk.vn/apps-games/da-tim-ra-cach-hack-duoc-vong-quay-may-man-cua-pirate-kings-20150426145339986.chn",
  "http://genk.vn/mobile/can-canh-smartphone-thiet-ke-toan-nhom-cuc-dep-tai-show-am-nhac-20150428082148792.chn",
  "http://genk.vn/apps-games/facebook-bo-sung-tinh-nang-goi-video-cho-ung-dung-messenger-20150428025041958.chn",
  "http://genk.vn/mobile/htc-desire-826-chinh-thuc-trinh-lang-tai-vn-gia-8-69-trieu-dong-20150427213159207.chn",
  "http://genk.vn/mobile/android-cuoi-cung-cung-danh-bai-ios-ve-doanh-thu-tu-cac-ung-dung-2015042816461131.chn",
  "http://genk.vn/tra-da-cong-nghe/chuyen-cay-gay-tu-suong-tu-nguoi-hung-den-ke-pha-hoai-20150423011121921.chn",
  "http://genk.vn/mobile/lo-dien-vivo-x5-pro-sieu-tu-suong-voi-camera-truoc-32-megapixel-20150428083847718.chn",
  "http://genk.vn/kham-pha/cuu-ky-su-nasa-va-du-an-trong-cay-bang-may-bay-khong-nguoi-lai-20150428152034209.chn",
  "http://genk.vn/mobile/huawei-honor-4c-trinh-lang-tai-trung-quoc-gia-chi-2-7-trieu-dong-20150429021423334.chn",
  "http://genk.vn/tin-ict/dong-dat-o-nepal-nha-mang-dong-loat-giam-cuoc-mien-phi-cuoc-goi-20150427113618967.chn",
  "http://genk.vn/thu-thuat/computer-managerment-cong-cu-quyen-nang-nhung-khong-ai-ngo-toi-20150428190805246.chn",
  "http://genk.vn/do-choi-so/can-canh-pc-ti-hon-acer-revo-one-doi-thu-cung-cua-cua-mac-mini-20150428214125279.chn",
  "http://genk.vn/do-choi-so/nhung-smartwatch-dep-khong-ti-vet-lam-gioi-cong-nghe-thon-thuc-20150419205731182.chn",
  "http://genk.vn/internet/facebook-ra-tinh-nang-ho-tro-lien-lac-sau-tham-hoa-dong-dat-nepal-20150426152853313.chn",
  "http://genk.vn/tra-da-cong-nghe/co-khi-nao-thiet-bi-cong-nghe-se-thong-minh-nhu-con-nguoi-20150425183644537.chn",
  "http://genk.vn/mobile/can-canh-sieu-pham-lg-g4-va-loat-anh-chup-thu-tu-camera-khau-do-f-1-8-20150429013711576.chn",
  "http://genk.vn/thu-thuat/pdf-split-merge-chia-nho-va-noi-cac-tap-tin-pdf-trong-mot-not-nhac-20150426181124337.chn",
  "http://genk.vn/tra-da-cong-nghe/lap-trinh-ung-dung-mobile-viet-mong-lam-mot-flappy-bird-bay-cao-20150425164147133.chn",
  "http://genk.vn/tin-ict/quy-ii-2015-apple-ban-duoc-61-1-trieu-iphone-tong-tien-mat-dat-194-ty-usd-20150428091605175.chn",
  "http://genk.vn/mobile/lg-g4-do-cau-hinh-cung-cac-sieu-pham-galaxy-s6-htc-one-m9-plus-va-sony-xperia-z4-2015042901214994.chn",
  "http://genk.vn/tra-da-cong-nghe/tim-kiem-ban-gai-tren-mang-bat-ngo-gap-duoc-nguoi-em-gai-chia-cach-tu-lau-20150424154234075.chn",
  "http://genk.vn/net/phi-cuoi-truoc-nhung-buc-anh-photoshop-cua-anh-chang-muon-cham-tay-vao-dinh-thap-eiffel-20150427160043458.chn",
  "http://genk.vn/mobile/sieu-pham-lg-g4-trinh-lang-thiet-ke-cong-camera-khau-do-f-1-8-tuyen-chien-voi-galaxy-s6-20150428231155499.chn",
  "http://genk.vn/kham-pha/cuu-bo-truong-bo-quoc-phong-cac-chinh-phu-dang-che-giau-su-ton-tai-cua-nguoi-ngoai-hanh-tinh-20150427163835726.chn"
]

chrome
  .runtime
  .onMessage
  .addListener (request, sender, sendResponse) ->
    if sender.tab
      if typeof request.action isnt 'undefined'
        switch request.action
          when 'tag'
            console.log request.data

$ document
  .ready () ->

    urlsList = $ 'ul#urls'
    liHtml = ''
    for url in urls
      liHtml += "<li>#{url}</li>"
    $ urlsList
      .html liHtml
    $ urlsList
      .delegate '> li', 'click', () ->
        url = $(@).text()
        message = action: 'open', 'url': url
        console.log message
        chrome.tabs.query {active: true, currentWindow: true}, (tabs) ->
          chrome.tabs.sendMessage tabs[0].id, message, (response) ->
            console.log response